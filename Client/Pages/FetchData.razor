@page "/"
@using QuizWebApp.Shared
@inject HttpClient Http
<div class="page" style="background-image: url(https://www.google.com/url?sa=i&url=https%3A%2F%2Fcomuti.in%2F&psig=AOvVaw2VKs4723W8t8FHMn530HqX&ust=1630824282369000&source=images&cd=vfe&ved=0CAsQjRxqFwoTCLDJ-Ybc5PICFQAAAAAdAAAAABAD)">

    @switch (questionIndex)
    {
        case 0:<h3>Click Start to start the test</h3>
            break;
        case 1:
            <PartialCode question="@questions[0].QuestionsData" OptionData="questions[0].OptionsData" />
            break;
        case 2:
            <PartialCode question="@questions[1].QuestionsData" OptionData="questions[1].OptionsData" />
            break;
        case 3:
            <PartialCode question="@questions[2].QuestionsData" OptionData="questions[2].OptionsData" />
            break;
        case 4:
            <PartialCode question="@questions[3].QuestionsData" OptionData="questions[3].OptionsData" />
            break;
    }
     @if (questionIndex <= 4)
     {
        <button @onclick="NextButtonClicked" style="float:right; outline-color :black; background-color:green;color:white;width:stretch;" class="btn-primary">@ButtonText</button>

     }
     else
     {
        <h3>ThankYou</h3>
        <button @onclick="CloseButtonClicked" style="float:right; outline-color :black; background-color:green;color:white;width:stretch;" class="btn-primary">Close</button>

     }
</div>

@code {
    [Inject]
    public NavigationManager navigationManager { get; set; }
    private Question[] questions;
    private int questionIndex = 0;
    private string ButtonText = "Start";
    protected override async Task OnInitializedAsync()
    {
        questions = await Http.GetFromJsonAsync<Question[]>("Question");
    }
    void CloseButtonClicked()
    {
        navigationManager.NavigateTo("", true);
    }
    void NextButtonClicked()
    {
        questionIndex = questionIndex + 1;
        ButtonText = "Next";
        if (questionIndex == 4)
        {
            ButtonText = "Submit";
        }
    }
}
